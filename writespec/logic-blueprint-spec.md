# 🧠 ReAct 构思阶段执行规范 (Phase: Plan - Logic Blueprint)

当用户发出“开始第 N 章”或类似指令时，AI 必须启动此预演流程，严禁“盲写”。

## 第一步：Thought (多维推演 - Multidimensional Reasoning)
**核心目的**：在头脑中进行剧情模拟，识别潜在的逻辑陷阱。

*   **剧情锚点同步 (Plot Sync)**：
    *   查阅 `outline.md`：本章在当前卷的定位是什么？（铺垫、小高潮、转折还是收尾？）
    *   查阅 `timeline.md`：有哪些历史遗留问题（伏笔）必须在本章提及或回收？
*   **角色逻辑核验 (Character Logic)**：
    *   查阅 `characters.yaml`：主角此时的心理状态（愤怒、冷静、绝望）是否支持接下来的行为？
    *   **增强点**：检查“反派/配角”智商。他们是否在基于自己已知的信息行动，而非配合主角的“全知视角”？
*   **资源与环境约束 (Constraint Check)**：
    *   查阅 `inventory.md`：主角包里还剩什么？（严禁在绝境中突然变出已消耗的丹药）。
    *   查阅 `geography.md`：当前地点的气候、地形、势力范围对战斗/对话有何影响？
*   **力量平衡审计 (Power Audit)**：
    *   查阅 `power.md`：本章涉及的突破或战斗，是否触碰了战力红线？越阶获胜的逻辑是否站得住脚？

## 第二步：Action (结构细化 - Structural Blueprint)
**核心目的**：将抽象逻辑转化为具体的叙事节拍（Beats）。

*   **拟定节拍细纲 (Scene Beats)**：将章节拆解为 3-5 个核心节拍。
    *   例：节拍 1：深夜遭遇潜伏 -> 节拍 2：言语试探发现破绽 -> 节拍 3：底牌尽出突围。
*   **信息揭露规划 (Info-Drop)**：
    *   本章要告诉读者什么新设定？
    *   要为后文埋下什么新线索？
*   **Bible 显式查阅 (Explicit Lookup)**：
    *   AI 必须列出本次构思查阅的具体文件和关键字段（如：查阅了 `power.md` 关于“筑基威压”的描述）。

## 第三步：Observation (逻辑校验 - Integrity Observation)
**核心目的**：扮演“杠精”角色，对细纲进行破坏性测试。

*   **冲突检测 (Conflict Check)**：
    *   是否存在“瞬移”问题？（从 A 城到 B 城的距离是否支持在一天内赶到？）
    *   是否存在“医学奇迹”？（上一章的断骨在本章是否被无故忽略？）
*   **体系纯度校验 (System Purity)**：
    *   本章名词是否出现了体系污染？（如：修仙大纲里出现了“魔力数值”）。
*   **爽点/节奏评估 (Pacing Check)**：
    *   本章是否达到了预期的情绪目标？
    *   如果是过渡章，是否有足够的“钩子”拉动下一章？
*   **修正机制 (Loopback)**：
    *   若发现 Observation 中有 ❌ 项，必须强制返回 Thought 重新构思，直到逻辑闭环。

---

### 执行模板 (Markdown Block)

每次开始新章节构思时，必须输出以下 Markdown 块：

```markdown
> [Plan: ReAct]
>
> **1. Thought (多维推演)**
> *   **剧情锚点**: [从 outline.md 提取本章定位与伏笔]
> *   **角色逻辑**: [分析主角心理与反派智商]
> *   **资源与环境**: 
>     *   地点: [参考 geography.md]
>     *   资源: [参考 inventory.md，包括伤势、剩余灵石、CD中的技能]
> *   **力量平衡**: [参考 power.md，分析战斗可行性]
>
> **2. Action (结构细化)**
> *   **节拍细纲**:
>     *   [节拍1]: [描述]
>     *   [节拍2]: [描述]
>     *   [节拍3]: [描述]
> *   **信息揭露**: [新设定或新线索]
> *   **Bible查阅**: [列出查阅的文件和字段]
>
> **3. Observation (逻辑校验)**
> *   **冲突检测**: [瞬移/医学奇迹检查]
>     *   *Result*: Pass / Fail
> *   **体系纯度**: [修仙名词检查]
>     *   *Result*: Pass / Fail
> *   **战力与资源**: [Power & Inventory Audit]
>     *   *Result*: Pass / Fail
> *   **爽点评估**: [情绪目标达成度]
>     *   *Result*: Pass / Fail
```

## 审计规则
1.  **战力红线**：若主角跨越 2 个以上大境界击杀敌人，且无合理外挂（如超频二阶+巨大代价），审计必须判为 **Fail**，并强制修改大纲。
2.  **资源一致性**：若大纲中提到使用“爆裂符”，但 `inventory.md` 中显示库存为 0，审计必须判为 **Fail**。
3.  **逻辑修正**：如果未能通过“战力平衡”或“状态同步”审计，AI 必须显式写出：`“检测到逻辑冲突，正在重新构思...”`，严禁带着逻辑漏洞强行进入撰写阶段。
